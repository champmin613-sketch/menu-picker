<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ë¬´ì—‡ì„ ë¨¹ì„ê¹Œ â€” ëœë¤ ë©”ë‰´ ë½‘ê¸°</title>
<style>
  :root{
    --bg:#0f1724; --card:#0b1220; --accent:#f59e0b; --muted:#9aa4b2;
    --glass: rgba(255,255,255,0.03);
    font-family: "Noto Sans KR", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  }
  *{box-sizing:border-box}
  body{
    margin:0; min-height:100vh; display:flex; align-items:center; justify-content:center;
    background: linear-gradient(180deg,#071023 0%, #081426 60%);
    color:#e6eef6; padding:18px;
  }
  .wrap{width:100%; max-width:720px;}
  header{display:flex; align-items:center; justify-content:space-between; margin-bottom:14px}
  h1{font-size:20px; margin:0}
  p.sub{margin:0; color:var(--muted); font-size:13px}
  .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    border-radius:14px; padding:18px; box-shadow:0 6px 20px rgba(2,6,23,0.6); border:1px solid rgba(255,255,255,0.03)}
  .controls{display:flex; gap:8px; flex-wrap:wrap; margin-bottom:12px}
  select, button, .toggle{
    background:var(--glass); border:1px solid rgba(255,255,255,0.035); color:inherit; padding:10px 12px;
    border-radius:10px; font-size:15px; min-width:0;
  }
  .big-btn{display:block; width:100%; padding:14px; font-size:18px; border-radius:12px; background:var(--accent); color:#071022; border:none; cursor:pointer; font-weight:700}
  .result{
    margin-top:14px; padding:18px; border-radius:12px; background:rgba(255,255,255,0.02);
    display:flex; gap:12px; align-items:center; justify-content:space-between;
  }
  .result .left{flex:1}
  .result .category{font-size:13px; color:var(--muted); margin-bottom:6px}
  .result .menu{font-size:20px; font-weight:700}
  .actions{display:flex; gap:8px}
  .small{padding:8px 10px; font-size:14px}
  .history{margin-top:12px; color:var(--muted); font-size:13px; max-height:140px; overflow:auto; padding-right:6px}
  .chip{display:inline-block; background:rgba(255,255,255,0.02); padding:6px 8px; border-radius:8px; margin:4px; font-size:13px}
  footer{margin-top:12px; color:var(--muted); font-size:12px; text-align:center}
  @keyframes pop {0%{transform:scale(.96)}50%{transform:scale(1.05)}100%{transform:scale(1)}}
  .pop{animation:pop .36s ease}
  @media(min-width:720px){ body{padding:30px} h1{font-size:22px} }
</style>
</head>
<body>
<div class="wrap">
  <header>
    <div>
      <h1>ì˜¤ëŠ˜ ë­ ë¨¹ì§€? â€” ë©”ë‰´ ëœë¤ ë½‘ê¸°</h1>
      <p class="sub">ì¹´í…Œê³ ë¦¬ ê³ ì •í•˜ê±°ë‚˜ ì™„ì „ ëœë¤. ê·€ì°®ìŒ ì œë¡œì§€.</p>
    </div>
    <div style="text-align:right">
      <button id="shareBtn" class="small" title="ê²°ê³¼ ê³µìœ ">ê³µìœ </button>
    </div>
  </header>

  <div class="card">
    <div class="controls">
      <select id="categorySelect" aria-label="ì¹´í…Œê³ ë¦¬ ì„ íƒ">
        <option value="random">ğŸ”€ ì „ì²´ ëœë¤</option>
        <option value="ì–‘ì‹">ğŸ ì–‘ì‹</option>
        <option value="ì¼ì‹">ğŸ£ ì¼ì‹</option>
        <option value="í•œì‹">ğŸš í•œì‹</option>
        <option value="ë¶„ì‹">ğŸ¢ ë¶„ì‹</option>
        <option value="ì¤‘ì‹">ğŸ¥¡ ì¤‘ì‹</option>
        <option value="ê·¸ì™¸">ğŸŒ¯ ê·¸ ì™¸</option>
      </select>

      <label style="display:flex;align-items:center;gap:8px">
        <input id="onlyDelivery" type="checkbox" style="accent-color:var(--accent)"/>
        <span style="font-size:14px;color:var(--muted)">ë°°ë‹¬ ìš°ì„ (ìƒí’ˆê¶Œ ì“°ê¸° ì¢‹ìŒ)</span>
      </label>

      <button id="drawBtn" class="big-btn">ëœë¤ ë½‘ê¸°</button>
    </div>

    <div class="result" id="resultArea" aria-live="polite">
      <div class="left">
        <div class="category" id="resultCategory">ì¹´í…Œê³ ë¦¬ â€” ì•„ì§</div>
        <div class="menu" id="resultMenu">ë²„íŠ¼ì„ ëˆŒëŸ¬ë¼. ë‚´ê°€ í•œë‹¤.</div>
      </div>
      <div class="actions">
        <button id="againBtn" class="small">ë‹¤ì‹œ</button>
        <button id="copyBtn" class="small">ë³µì‚¬</button>
      </div>
    </div>

    <div class="history" id="history" aria-label="ìµœê·¼ ì„ íƒ">
      <!-- history chips -->
    </div>

    <footer>
      ë©”ë‰´ ëª©ë¡ì€ ì§ì ‘ í¸ì§‘ ê°€ëŠ¥. (HTML íŒŒì¼ ì—´ì–´ arrays ìˆ˜ì •í•˜ë©´ ë.)
    </footer>
  </div>
</div>

<script>
(function(){
  const MENUS = {
    "ì–‘ì‹":[ "ì•Œë¦¬ì˜¤ì˜¬ë¦¬ì˜¤","ê¹Œë¥´ë³´ë‚˜ë¼","ìŠ¤í…Œì´í¬","ê°ë°”ìŠ¤","ë¦¬ì¡°ë˜","í”¼ì","í–„ë²„ê±°","ìƒëŸ¬ë“œ","ì˜¤ë¯€ë¼ì´ìŠ¤","ë¼ìëƒ" ],
    "ì¼ì‹":[ "ê°€ì¸ ë™","ì‚¬ì¼€ë™","ê·œë™","ì´ˆë°¥","ìš°ë™","ëˆì¹´ì¸ ","ì¼ë³¸ì‹ ì¹´ë ˆ","ë¼ë©˜","ì˜¤ê¼¬ë…¸ë¯¸ì•¼ë¼","íƒ€ì½”ì•¼ë¼" ],
    "í•œì‹":[ "ì œìœ¡ë®ë°¥","ê¹€ì¹˜ì°Œê°œ","ë¹„ë¹”ë°¥","ê°ìíƒ•","ìˆœëŒ€êµ­","ì‚¼ê²¹ì‚´","ë‹­ê°ˆë¹„","ë¹„ë¹”êµ­ìˆ˜","ê³±ì°½ì „ê³¨","ì°¸ì¹˜ë§ˆìš”ë®ë°¥" ],
    "ë¶„ì‹":[ "ë–¡ë³¶ì´","íŠ€ê¹€ì„¸íŠ¸","ê¹€ë°¥","ë¼ë©´","ìˆœëŒ€ë³¶ìŒ","ì«„ë©´","ë¼ë³¶ì´","ì–´ë¬µíƒ•","ëˆê¹ŒìŠ¤","ì˜¤ë¯€ë¼ì´ìŠ¤(ë¶„ì‹ì‹)" ],
    "ì¤‘ì‹":[ "ì§œì¥ë©´","ì§¬ë½•","ê°„ì§œì¥","ë³¶ìŒë°¥","íƒ•ìˆ˜ìœ¡","ë¼ì¡°ê¸°","ê¹í’ê¸°","ë§ˆíŒŒë‘ë¶€ë°¥","ìœ ì‚°ìŠ¬","ê³ ì¶”ì¡ì±„ë°¥" ],
    "ê·¸ì™¸":[ "ìŒ€êµ­ìˆ˜","íŒŸíƒ€ì´","íƒ€ì½”","ë¶€ë¦¬ë˜","ì¼€ë°¥","ì¹˜í‚¨","ë‚˜ì´ˆ","ë²„í„°ì»¤ë¦¬","í”¼ì‰¬ì•¤ì¹©ìŠ¤","ë¹™ìˆ˜" ]
  };

  const drawBtn = document.getElementById('drawBtn');
  const againBtn = document.getElementById('againBtn');
  const copyBtn = document.getElementById('copyBtn');
  const shareBtn = document.getElementById('shareBtn');
  const catSel = document.getElementById('categorySelect');
  const onlyDelivery = document.getElementById('onlyDelivery');
  const resCat = document.getElementById('resultCategory');
  const resMenu = document.getElementById('resultMenu');
  const historyEl = document.getElementById('history');

  let lastResult = null;
  const hist = [];

  function randInt(n){ return Math.floor(Math.random()*n); }
  function pickFromCategory(cat){
    const list = MENUS[cat];
    return list[randInt(list.length)];
  }

  function pickRandom(){
    const chosenCat = catSel.value === 'random' ? Object.keys(MENUS)[randInt(Object.keys(MENUS).length)] : catSel.value;
    const menu = pickFromCategory(chosenCat);
    return {cat: chosenCat, menu};
  }

  function showResult(obj){
    resCat.textContent = "ì¹´í…Œê³ ë¦¬ â€” " + obj.cat;
    resMenu.textContent = obj.menu;
    resMenu.classList.remove('pop');
    void resMenu.offsetWidth; // reflow to restart animation
    resMenu.classList.add('pop');
    lastResult = obj;
    hist.unshift(obj);
    if(hist.length>12) hist.pop();
    renderHistory();
  }

  function renderHistory(){
    historyEl.innerHTML = "";
    hist.forEach(h=>{
      const c = document.createElement('span');
      c.className = 'chip';
      c.textContent = `${h.cat} Â· ${h.menu}`;
      historyEl.appendChild(c);
    });
  }

  drawBtn.addEventListener('click', ()=>{
    // if onlyDelivery.checked we could filter â€” but menu list is neutral; just annotate
    const res = pickRandom();
    if(onlyDelivery.checked){
      // gentle nudge: prefer items that typically ë°°ë‹¬ ê°€ëŠ¥ (simple heuristic)
      // We'll attempt up to 6 times to get a "likely ë°°ë‹¬" menu (pizza/ì¹˜í‚¨/ë–¡ë³¶ì´/ë¶„ì‹/ì¤‘ì‹ë¥˜ ë“±)
      const deliveryHints = ["í”¼ì","ì¹˜í‚¨","ë–¡ë³¶ì´","ì§œì¥","ì§¬","ëˆê¹ŒìŠ¤","ê¹€ë°¥","í–„ë²„ê±°","ë¼ë©´","íƒ•ìˆ˜ìœ¡","ë³¶ìŒë°¥"];
      let attempt = 0;
      let final = res;
      while(attempt < 6){
        if( deliveryHints.some(h=> final.menu.includes(h) ) ) break;
        final = pickRandom();
        attempt++;
      }
      final.menu = final.menu + " (ë°°ë‹¬ ì¶”ì²œ)";
      showResult(final);
    } else {
      showResult(res);
    }
  });

  againBtn.addEventListener('click', ()=>{
    if(!lastResult) { drawBtn.click(); return; }
    drawBtn.click();
  });

  copyBtn.addEventListener('click', async ()=>{
    if(!lastResult) { alert('ë¨¼ì € ë½‘ì•„ë¼.'); return; }
    const text = `${lastResult.cat} â€” ${lastResult.menu}`;
    try{
      await navigator.clipboard.writeText(text);
      copyBtn.textContent = 'ë³µì‚¬ ì™„ë£Œ';
      setTimeout(()=>copyBtn.textContent = 'ë³µì‚¬',1200);
    }catch(e){
      alert('ë³µì‚¬ ì‹¤íŒ¨. ë¸Œë¼ìš°ì €ì—ì„œ í´ë¦½ë³´ë“œ ê¶Œí•œì„ í—ˆìš©í–ˆëŠ”ì§€ í™•ì¸í•´.');
    }
  });

  shareBtn.addEventListener('click', async ()=>{
    if(!lastResult){ alert('ë¨¼ì € ë©”ë‰´ë¥¼ í•˜ë‚˜ ë½‘ì•„ë¼.'); return; }
    const text = `${lastResult.cat} â€” ${lastResult.menu}`;
    if(navigator.share){
      try{
        await navigator.share({title:'ì˜¤ëŠ˜ ë­ ë¨¹ì§€?', text});
      }catch(e){
        // share cancelled or failed
      }
    }else{
      // fallback: copy to clipboard
      try{
        await navigator.clipboard.writeText(text);
        alert('ê³µìœ  API ë¯¸ì§€ì›. ê²°ê³¼ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.');
      }catch(e){
        alert('ê³µìœ  ë¶ˆê°€. í´ë¦½ë³´ë“œ ë³µì‚¬ë„ ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
      }
    }
  });

  // keyboard shortcut (r)
  document.addEventListener('keydown', (e)=>{
    if(e.key.toLowerCase()==='r') drawBtn.click();
  });

  // ì´ˆê¸° ëœë¤ í•˜ë‚˜ í‘œì‹œ(ì˜µì…˜)
  // const init = pickRandom(); showResult(init);
})();
</script>
</body>
</html>
